<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©(GE)n√®re - Plateforme d'√âcosyst√®me Mutualis√©</title>
    <style>
        /* Styles g√©n√©raux */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f7f9fc;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: #2A9D8F;
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        header h1 {
            margin: 0;
            font-size: 2.2rem;
        }
        
        header h2 {
            margin: 0;
            font-weight: normal;
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        nav {
            background-color: #264653;
            color: white;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        nav li {
            padding: 15px 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
        }
        
        nav a:hover {
            text-decoration: underline;
        }
        
        /* Sections */
        section {
            padding: 50px 0;
        }
        
        section h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #264653;
        }
        
        .intro {
            background-color: #E9C46A;
            color: #264653;
        }
        
        .intro p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .benefits {
            background-color: white;
        }
        
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .benefit-card {
            background-color: #f7f9fc;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .benefit-card:hover {
            transform: translateY(-5px);
        }
        
        .benefit-card h3 {
            color: #2A9D8F;
            margin-top: 0;
        }
        
        .how-it-works {
            background-color: #f7f9fc;
        }
        
        .steps {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .step {
            display: flex;
            margin-bottom: 40px;
            align-items: center;
        }
        
        .step-number {
            background-color: #E76F51;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
        }
        
        .registration {
            background-color: white;
        }
        
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #f7f9fc;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #264653;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
        }
        
        .submit-btn {
            background-color: #2A9D8F;
            color: white;
            border: none;
            padding: 14px 24px;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #238C7F;
        }
        
        footer {
            background-color: #264653;
            color: white;
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
        }
        
        footer a {
            color: #E9C46A;
        }
        
        /* Nouveaux styles pour les fonctionnalit√©s d'√©dition */
        .profile-btn {
            background-color: #F4A261;
            color: #264653;
            border: none;
            padding: 10px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            margin-left: 20px;
        }
        
        .profile-btn:hover {
            background-color: #E76F51;
            color: white;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .edit-btn {
            background: none;
            border: none;
            color: #2A9D8F;
            cursor: pointer;
            font-size: 1.2rem;
            display: inline-flex;
            align-items: center;
            margin-left: 10px;
        }
        
        .edit-btn:hover {
            color: #E76F51;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .export-btn {
            background-color: #264653;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            margin-top: 20px;
        }
        
        .export-btn:hover {
            background-color: #1A323E;
        }
        
        .data-notice {
            margin-top: 30px;
            padding: 15px;
            background-color: #FDF5E8;
            border-left: 4px solid #F4A261;
            border-radius: 4px;
        }
        
        .profile-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .hidden {
            display: none;
        }
        
        .save-btn {
            background-color: #2A9D8F;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 15px;
        }
        
        .save-btn:hover {
            background-color: #238C7F;
        }
    </style>
</head>
<body>
    <!-- Modal de connexion -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('loginModal')">&times;</span>
            <h2>Acc√©der √† mon profil</h2>
            <p>Veuillez entrer l'email professionnel utilis√© lors de l'inscription.</p>
            <div class="form-group">
                <label for="loginEmail">Email professionnel</label>
                <input type="email" id="loginEmail" required>
            </div>
            <button class="submit-btn" onclick="loginProfile()">Acc√©der √† mon profil</button>
        </div>
    </div>
    
    <!-- Modal du profil -->
    <div id="profileModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <span class="close-btn" onclick="closeModal('profileModal')">&times;</span>
            <h2>Profil de l'entreprise</h2>
            <div id="profileContent">
                <!-- Section d'information d'entreprise -->
                <div class="profile-section">
                    <div class="section-title">
                        <h3>Informations de l'entreprise</h3>
                        <button class="edit-btn" onclick="toggleEdit('company-info')">‚úèÔ∏è</button>
                    </div>
                    
                    <div id="company-info-display">
                        <!-- Informations affich√©es ici -->
                    </div>
                    
                    <div id="company-info-edit" class="hidden">
                        <div class="form-group">
                            <label for="editName">Nom de l'entreprise</label>
                            <input type="text" id="editName">
                        </div>
                        <div class="form-group">
                            <label for="editAddress">Adresse</label>
                            <input type="text" id="editAddress">
                        </div>
                        <div class="form-group">
                            <label for="editZip">Code postal</label>
                            <input type="text" id="editZip">
                        </div>
                        <div class="form-group">
                            <label for="editCity">Ville</label>
                            <input type="text" id="editCity">
                        </div>
                        <div class="form-group">
                            <label for="editWebsite">Site web</label>
                            <input type="url" id="editWebsite">
                        </div>
                        <button class="save-btn" onclick="saveSection('company-info')">Enregistrer les modifications</button>
                    </div>
                </div>
                
                <!-- Section des ressources -->
                <div class="profile-section">
                    <div class="section-title">
                        <h3>Ressources disponibles</h3>
                        <button class="edit-btn" onclick="toggleEdit('resources')">‚úèÔ∏è</button>
                    </div>
                    
                    <div id="resources-display">
                        <!-- Ressources affich√©es ici -->
                    </div>
                    
                    <div id="resources-edit" class="hidden">
                        <div class="form-group">
                            <label for="editResources">Ressources disponibles</label>
                            <textarea id="editResources" rows="4" placeholder="D√©crivez les ressources que votre entreprise peut offrir..."></textarea>
                        </div>
                        <button class="save-btn" onclick="saveSection('resources')">Enregistrer les modifications</button>
                    </div>
                </div>
                
                <!-- Section des besoins -->
                <div class="profile-section">
                    <div class="section-title">
                        <h3>Besoins recherch√©s</h3>
                        <button class="edit-btn" onclick="toggleEdit('needs')">‚úèÔ∏è</button>
                    </div>
                    
                    <div id="needs-display">
                        <!-- Besoins affich√©s ici -->
                    </div>
                    
                    <div id="needs-edit" class="hidden">
                        <div class="form-group">
                            <label for="editNeeds">Besoins recherch√©s</label>
                            <textarea id="editNeeds" rows="4" placeholder="D√©crivez les ressources dont votre entreprise a besoin..."></textarea>
                        </div>
                        <button class="save-btn" onclick="saveSection('needs')">Enregistrer les modifications</button>
                    </div>
                </div>
                
                <!-- Section des pr√©f√©rences -->
                <div class="profile-section">
                    <div class="section-title">
                        <h3>Pr√©f√©rences de notification</h3>
                        <button class="edit-btn" onclick="toggleEdit('preferences')">‚úèÔ∏è</button>
                    </div>
                    
                    <div id="preferences-display">
                        <!-- Pr√©f√©rences affich√©es ici -->
                    </div>
                    
                    <div id="preferences-edit" class="hidden">
                        <div class="form-group">
                            <label for="editPreferences">Pr√©f√©rences de notification</label>
                            <select id="editPreferences">
                                <option value="all">Toutes les correspondances</option>
                                <option value="weekly">R√©sum√© hebdomadaire</option>
                                <option value="important">Correspondances importantes uniquement</option>
                                <option value="none">Aucune notification</option>
                            </select>
                        </div>
                        <button class="save-btn" onclick="saveSection('preferences')">Enregistrer les modifications</button>
                    </div>
                </div>
                
                <button class="export-btn" onclick="exportData()">üì• Exporter mes donn√©es</button>
                
                <div class="data-notice">
                    <p><strong>‚ö†Ô∏è Important :</strong> Vos donn√©es sont stock√©es localement sur cet appareil uniquement. Pour √©viter toute perte d'information en cas de changement d'appareil ou de navigateur, veuillez utiliser le bouton "Exporter mes donn√©es" et conserver ce fichier en lieu s√ªr.</p>
                </div>
            </div>
        </div>
    </div>

    <header>
        <div class="container">
            <div>
                <h1>R√©(GE)n√®re</h1>
                <h2>Plateforme d'√âcosyst√®me Mutualis√© - Gen√®ve</h2>
            </div>
            <button class="profile-btn" onclick="openModal('loginModal')">üë§ Acc√©der √† mon profil</button>
        </div>
    </header>
    
    <nav>
        <div class="container">
            <ul>
                <li><a href="#intro">Accueil</a></li>
                <li><a href="#benefits">Avantages</a></li>
                <li><a href="#how">Comment √ßa marche</a></li>
                <li><a href="#register">S'inscrire</a></li>
            </ul>
        </div>
    </nav>
    
   <section id="intro" class="intro">
    <div class="container">
        <h2>Cr√©ons un √©cosyst√®me durable. Mutualisons nos ressources !</h2>
        <p>R√©(GE)n√®re connecte les entreprises genevoises pour cr√©er des synergies locales, valoriser les d√©chets et optimiser l'utilisation des ressources dans une d√©marche d'√©conomie circulaire.</p>
    </div>
</section>
    
    <section id="benefits" class="benefits">
        <div class="container">
            <h2>Pourquoi rejoindre notre √©cosyst√®me ?</h2>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <h3>√âconomies significatives</h3>
                    <p>R√©duisez vos co√ªts d'√©limination des d√©chets et trouvez des ressources √† moindre co√ªt aupr√®s d'autres entreprises locales.</p>
                </div>
                <div class="benefit-card">
                    <h3>Impact environnemental positif</h3>
                    <p>Contribuez √† r√©duire l'empreinte carbone de votre entreprise en donnant une seconde vie √† vos ressources inutilis√©es.</p>
                </div>
                <div class="benefit-card">
                    <h3>R√©seautage local</h3>
                    <p>D√©veloppez votre r√©seau professionnel en collaborant avec d'autres entreprises genevoises partageant vos valeurs.</p>
                </div>
                <div class="benefit-card">
                    <h3>Image responsable</h3>
                    <p>Renforcez votre image d'entreprise engag√©e dans le d√©veloppement durable et l'√©conomie locale.</p>
                </div>
                <div class="benefit-card">
                    <h3>Innovation collaborative</h3>
                    <p>D√©couvrez de nouvelles fa√ßons d'utiliser vos ressources et inspirez-vous des pratiques d'autres entreprises.</p>
                </div>
                <div class="benefit-card">
                    <h3>Simplicit√© d'utilisation</h3>
                    <p>Une plateforme intuitive pour publier vos offres et demandes, et √™tre mis en relation automatiquement avec des correspondances pertinentes.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="how" class="how-it-works">
        <div class="container">
            <h2>Comment √ßa marche</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Inscrivez votre entreprise</h3>
                        <p>Remplissez le formulaire d'inscription avec les informations de votre entreprise. C'est gratuit et prend moins de 5 minutes.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Publiez vos ressources et besoins</h3>
                        <p>Indiquez les ressources que vous pouvez offrir (d√©chets, mat√©riaux, √©quipements, espaces, comp√©tences) et celles dont vous avez besoin.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Recevez des correspondances</h3>
                        <p>Notre algorithme identifie automatiquement les entreprises dont les besoins correspondent √† vos ressources, et vice-versa.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Collaborez localement</h3>
                        <p>Entrez en contact avec les entreprises sugg√©r√©es et √©tablissez des partenariats b√©n√©fiques pour tous, dans une logique d'√©conomie locale.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section id="register" class="registration">
        <div class="container">
            <h2>Inscrivez votre entreprise</h2>
            <div class="form-container">
                <form id="registrationForm">
                    <div class="form-group">
                        <label for="companyName">Nom de l'entreprise*</label>
                        <input type="text" id="companyName" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Adresse*</label>
                        <input type="text" id="address" required>
                    </div>
                    <div class="form-group">
                        <label for="zipCode">Code postal*</label>
                        <input type="text" id="zipCode" required>
                    </div>
                    <div class="form-group">
                        <label for="city">Ville*</label>
                        <input type="text" id="city" required>
                    </div>
                    <div class="form-group">
                        <label for="website">Site web</label>
                        <input type="url" id="website">
                    </div>
                    <div class="form-group">
                        <label for="email">Email professionnel*</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="resources">Ressources disponibles*</label>
                        <textarea id="resources" rows="4" required placeholder="D√©crivez les ressources que votre entreprise peut offrir (d√©chets, mat√©riaux, √©quipements, espaces, comp√©tences)..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="needs">Besoins recherch√©s*</label>
                        <textarea id="needs" rows="4" required placeholder="D√©crivez les ressources dont votre entreprise a besoin..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="notifications">Pr√©f√©rences de notification</label>
                        <select id="notifications">
                            <option value="all">Toutes les correspondances</option>
                            <option value="weekly">R√©sum√© hebdomadaire</option>
                            <option value="important">Correspondances importantes uniquement</option>
                            <option value="none">Aucune notification</option>
                        </select>
                    </div>
                    <button type="button" class="submit-btn" onclick="registerCompany()">S'inscrire</button>
                </form>
            </div>
        </div>
    </section>
    
    <footer>
    <div class="container">
        <p>&copy; 2025 R√©(GE)n√®re - Plateforme d'√âcosyst√®me Mutualis√© Gen√®ve cr√©√©e par l'Association √âclore</p>
        <p>Contact : <a href="mailto:info@eclore-asso.org">info@eclore-asso.org</a></p>
    </div>
</footer>

    <script>
        // Fonctions pour g√©rer les modals
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            
            // Si on ouvre le profil, charger les donn√©es
            if (modalId === 'profileModal') {
                loadProfileData();
            }
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Fermer le modal si on clique en dehors
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                event.target.style.display = 'none';
            }
        }
        
        // Fonction pour s'identifier et acc√©der au profil
        function loginProfile() {
            const email = document.getElementById('loginEmail').value;
            
            if (!email) {
                alert('Veuillez entrer votre email professionnel');
                return;
            }
            
            // V√©rifier si l'entreprise existe dans le stockage local
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const company = companies.find(c => c.email === email);
            
            if (company) {
                // Stocker l'email actuellement connect√©
                localStorage.setItem('currentLoggedIn', email);
                
                // Fermer le modal de login et ouvrir le profil
                closeModal('loginModal');
                openModal('profileModal');
            } else {
                alert("Aucune entreprise trouv√©e avec cet email. Veuillez v√©rifier votre adresse ou vous inscrire.");
            }
        }
        
        // Fonction pour charger les donn√©es du profil
        function loadProfileData() {
            const email = localStorage.getItem('currentLoggedIn');
            if (!email) return;
            
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const company = companies.find(c => c.email === email);
            
            if (company) {
                // Charger les informations de l'entreprise
                document.getElementById('company-info-display').innerHTML = `
                    <p><strong>Nom :</strong> ${company.name || ''}</p>
                    <p><strong>Adresse :</strong> ${company.address || ''}</p>
                    <p><strong>Code postal :</strong> ${company.zipCode || ''}</p>
                    <p><strong>Ville :</strong> ${company.city || ''}</p>
                    <p><strong>Site web :</strong> ${company.website || 'Non sp√©cifi√©'}</p>
                    <p><strong>Email :</strong> ${company.email || ''}</p>
                `;
                
                // Charger les valeurs dans le formulaire d'√©dition
                document.getElementById('editName').value = company.name || '';
                document.getElementById('editAddress').value = company.address || '';
                document.getElementById('editZip').value = company.zipCode || '';
                document.getElementById('editCity').value = company.city || '';
                document.getElementById('editWebsite').value = company.website || '';
                
                // Charger les ressources
                document.getElementById('resources-display').innerHTML = `
                    <p>${company.resources || 'Aucune ressource sp√©cifi√©e'}</p>
                `;
                document.getElementById('editResources').value = company.resources || '';
                
                // Charger les besoins
                document.getElementById('needs-display').innerHTML = `
                    <p>${company.needs || 'Aucun besoin sp√©cifi√©'}</p>
                `;
                document.getElementById('editNeeds').value = company.needs || '';
                
                // Charger les pr√©f√©rences
                const prefText = {
                    'all': 'Toutes les correspondances',
                    'weekly': 'R√©sum√© hebdomadaire',
                    'important': 'Correspondances importantes uniquement',
                    'none': 'Aucune notification'
                };
                document.getElementById('preferences-display').innerHTML = `
                    <p>${prefText[company.notifications] || 'Toutes les correspondances'}</p>
                `;
                document.getElementById('editPreferences').value = company.notifications || 'all';
            }
        }
        
        // Fonction pour basculer l'affichage/√©dition d'une section
        function toggleEdit(section) {
            const displayElement = document.getElementById(section + '-display');
            const editElement = document.getElementById(section + '-edit');
            
            if (displayElement && editElement) {
                if (displayElement.classList.contains('hidden')) {
                    displayElement.classList.remove('hidden');
                    editElement.classList.add('hidden');
                } else {
                    displayElement.classList.add('hidden');
                    editElement.classList.remove('hidden');
                }
            }
        }
        
        // Fonction pour enregistrer les modifications d'une section
        function saveSection(section) {
            const email = localStorage.getItem('currentLoggedIn');
            if (!email) return;
            
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const companyIndex = companies.findIndex(c => c.email === email);
            
            if (companyIndex !== -1) {
                const company = companies[companyIndex];
                
                // Mettre √† jour selon la section
                if (section === 'company-info') {
                    company.name = document.getElementById('editName').value;
                    company.address = document.getElementById('editAddress').value;
                    company.zipCode = document.getElementById('editZip').value;
                    company.city = document.getElementById('editCity').value;
                    company.website = document.getElementById('editWebsite').value;
                } else if (section === 'resources') {
                    company.resources = document.getElementById('editResources').value;
                } else if (section === 'needs') {
                    company.needs = document.getElementById('editNeeds').value;
                } else if (section === 'preferences') {
                    company.notifications = document.getElementById('editPreferences').value;
                }
                
                // Enregistrer les modifications
                companies[companyIndex] = company;
                localStorage.setItem('companies', JSON.stringify(companies));
                
                // Recharger les donn√©es pour afficher les modifications
                loadProfileData();
                
                // Basculer vers l'affichage
                toggleEdit(section);
                
                // Message de confirmation
                alert('Vos modifications ont √©t√© enregistr√©es avec succ√®s.');
            }
        }
        
        // Fonction pour exporter les donn√©es de l'entreprise
        function exportData() {
            const email = localStorage.getItem('currentLoggedIn');
            if (!email) return;
            
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const company = companies.find(c => c.email === email);
            
            if (company) {
                // Formater les donn√©es pour l'export
                const prefText = {
                    'all': 'Toutes les correspondances',
                    'weekly': 'R√©sum√© hebdomadaire',
                    'important': 'Correspondances importantes uniquement',
                    'none': 'Aucune notification'
                };
                
                const now = new Date();
                const date = `${now.getDate().toString().padStart(2, '0')}/${(now.getMonth()+1).toString().padStart(2, '0')}/${now.getFullYear()}`;
                
                const exportText = `PROFIL ENTREPRISE SUR R√â(GE)N√àRE
Date d'exportation : ${date}

INFORMATIONS DE L'ENTREPRISE
--------------------------
Nom : ${company.name || ''}
Adresse : ${company.address || ''}
Code postal : ${company.zipCode || ''}
Ville : ${company.city || ''}
Site web : ${company.website || ''}
Email : ${company.email || ''}

RESSOURCES DISPONIBLES
--------------------------
${company.resources || 'Aucune ressource sp√©cifi√©e'}

BESOINS RECHERCH√âS
--------------------------
${company.needs || 'Aucun besoin sp√©cifi√©'}

PR√âF√âRENCES DE NOTIFICATION
--------------------------
${prefText[company.notifications] || 'Toutes les correspondances'}

---
Pour mettre √† jour ces informations, reconnectez-vous sur R√©(GE)n√®re avec votre email.
Ces donn√©es sont stock√©es localement sur votre appareil. Conservez ce fichier pour les retrouver en cas de changement d'appareil.`;
                
                // Cr√©er et t√©l√©charger le fichier
                const blob = new Blob([exportText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `regenere-profil-${company.name.replace(/\s+/g, '-').toLowerCase()}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('Vos donn√©es ont √©t√© export√©es avec succ√®s. Veuillez conserver ce fichier dans un emplacement s√©curis√©.');
            }
        }
        
        // Fonction pour enregistrer une nouvelle entreprise
        function registerCompany() {
            const name = document.getElementById('companyName').value;
            const address = document.getElementById('address').value;
            const zipCode = document.getElementById('zipCode').value;
            const city = document.getElementById('city').value;
            const website = document.getElementById('website').value;
            const email = document.getElementById('email').value;
            const resources = document.getElementById('resources').value;
            const needs = document.getElementById('needs').value;
            const notifications = document.getElementById('notifications').value;
            
            // Validation simple
            if (!name || !address || !zipCode || !city || !email || !resources || !needs) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }
            
            // V√©rifier si l'email existe d√©j√†
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            if (companies.some(c => c.email === email)) {
                alert('Une entreprise est d√©j√† inscrite avec cet email. Veuillez utiliser la fonction "Acc√©der √† mon profil" pour modifier vos informations.');
                return;
            }
            
            // Cr√©er l'objet entreprise
            const company = {
                name,
                address,
                zipCode,
                city,
                website,
                email,
                resources,
                needs,
                notifications
            };
            
            // Ajouter √† la liste et sauvegarder
            companies.push(company);
            localStorage.setItem('companies', JSON.stringify(companies));
            
            // R√©initialiser le formulaire
            document.getElementById('registrationForm').reset();
            
            // Message de confirmation
            alert('Votre entreprise a √©t√© inscrite avec succ√®s ! Vous pouvez maintenant acc√©der √† votre profil depuis le bouton "Acc√©der √† mon profil".');
        }
    </script>
</body>
</html>
